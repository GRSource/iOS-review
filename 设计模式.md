# 设计模式

## 六大设计原则

* 单一职责原则
* 依赖倒置原则
* 开闭原则
* 里氏替换原则
* 接口隔离原则
* 迪米特法则

[设计原则](http://www.cocoachina.com/articles/24916)

### 单一职责原则

定义：一个类只允许有一个职责，即只有一个导致该类变更的原因

解读：类职责的变化往往就是导致类变化的原因：也就是说如果一个类具有多种职责，就会有多种导致这个类变化的原因，从而导致这个类的维护变得困难。  
往往在软件开发中随着需求的不断增加，可能会给原有的类添加一些本来不属于它的职责，从而违反了单一职责原则。如果我们发现当前类的职责不仅仅有一个，那就应该将本来不属于该类真正的职责分离出去。  
不仅仅是类，函数（方法）也要遵循单一职责原则，即：一个函数（方法）只做一件事。如果发现一个函数（方法）里面有不同的任务，则需要将不同的任务以另一个函数（方法）的形式分离出去。

优点：如果类与方法的职责划分得很清晰，不但可以提高代码的可读性，更实际性地降低了程序出错的风险，因为清晰的代码会让bug无处藏身，也有利于bug的追踪，也就是降低了程序的维护成本。

### 开闭原则

定义：一个软件实体如类、模块和函数应该对扩展开放，对修改关闭。

解读：用抽象构建框架，用实现扩展细节。不以改动原有类的方式来实现新需求，而是应该以实现事先抽象出来的接口（或具体类继承抽象类）的方式来实现。

优点：实践开闭原则的有点在于可以在不改动原有代码的前提下给程序扩展功能。增加了程序的可扩展性，同时也境地了程序的维护成本。

### 依赖倒置原则

定义：依赖抽象，而不是依赖实现。抽象不应该依赖细节；细节应该依赖抽象。高层模块不能依赖低层模块，二者都应该依赖抽象。

解读：针对接口编程，而不是针对实现编程。尽量不要从具体的类派生，而是以继承抽象类或者实现接口来实现。关于高层模块与低层模块的划分可以按照决策能力的高低进行划分。业务层自然就处于上层模块，逻辑层和数据层自然就归类为低层。

优点：通过抽象来搭建框架，建立类和类的关联，以减少类间的耦合性。而且以抽象搭建的系统要比以具体实现搭建的系统更加稳定，扩展性更高，同时也便于维护。

### 接口隔离原则

定义：多个特定的客户端接口要好于一个通用性的总接口。

解读：客户端不应该依赖于它不需要实现的接口。不简历庞大臃肿的接口，应尽量细化接口，接口中的方法应该尽量少。需要注意的是：接口的粒度也不能太小。如果太小，则会造成接口数量过多，使设计复杂化。

优点：避免同一个接口里面包含不同类职责的方法，接口责任划分更加明确，符合高内聚低耦合的思想。

### 迪米特法则

定义：一个对象应该对尽可能少的对象有接触，也就是只接触那些真正需要接触的对象。

解读：迪米特法则也叫做最少知道原则，一个类应该只和它的成员变量，方法的输入，返回参数中的类作交流，而不应该引入其他的类（间接交流）。

优点：实践迪米特法则可以良好地降低类与类之间的耦合，减少类与类之间的关联程度，让类与类之间的协作更加直接。

### 里氏替换原则

定义：所有引用基类的地方必须能透明地使用其子类的对象，也就是说子类对象可以替换其父类对象，而程序执行效果不变。

解读：在继承体系中，子类中可以增加自己特有的方法，也可以实现父类的抽象方法，但是不能重写父类的非抽象方法，否则该继承关系就不是一个正确的继承关系。

优点：可以检验继承使用的正确性，约束继承在使用上的泛滥。

## 设计模式种类及使用场景

* 责任链
* 桥接
* 适配器
* 单例
* 命令

## 责任链模式

在责任链模式里，很多对象由每一个对象对其下家的引用而连接起来形成一条链。请求在这个链上传递，直到链上的某一个对象决定处理此请求。

## 桥接模式

是用于把抽象化与实现化解耦，使得二者可以独立变化。这种类型的设计模式属于结构型模式，它通过提供抽象化和实现化之间的桥接结构，来实现二者的解耦。

这种模式涉及到一个作为桥接的接口，使得实体类的功能独立于接口实现类。这两种类型的类可被结构化改变而互不影响。

## 适配器模式

将一个类的接口转换成客户端希望的另外一个接口。适配器模式使得原本由于接口不兼容而不能一起工作的哪些类可以一起工作。

适配器：改变已有的两个接口，让它们相容。  
桥接模式：分离抽象化和实现，使得两者的接口可以不同，目的是分离。

## 单例模式

## 命令模式

将请求封装成对象，以便使用不同的请求、日志、队列等参数化其他对象。命令模式也支持撤销操作。

简单的命令模式有四个角色：  

1. 命令发出者
2. 命令管理者
3. 命令接收者
4. 命令对象

命令管理者需要管理所有接收到的命令，并通过命令管理者执行、保存和撤销命令。  
命令接收者需要实现执行的动作和撤销时候的动作。  
命令对象则让接收者执行响应的操作。  
命令发出者则执行设置命令的参数，以及给予执行或者撤销的指令。

命令模式用在什么地方？  

* 让该功能允许撤销与恢复
* 让对象参数化一个动作，并执行操作，不同的命令对象代替回调函数
* 可以对命令请求尽心执行、排序、执行等

### 装饰模式

装饰模式好比给一个对象赋予新的特征

### 代理模式

### 工程模式
